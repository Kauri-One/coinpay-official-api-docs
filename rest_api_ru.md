- [Обработка запросов](#обработка-запросов)
- [Публичные данные](#публичные-данные)
  - [Получение списка активных валют](#получение-списка-активных-валют)
  - [Получение списка активных пар](#получение-списка-активных-пар)
  - [Получение цен](#получение-цен)
  - [Подсчёт стоимости обмена](#подсчёт-стоимости-обмена)
  
  



## Обработка Запросов
* Базовый api url - https://coinpay.org.ua/
* Content-Type - json

Каждый ответ содержит структуру, в которой есть поле "status" - которое отвечает за удачно обработанный запрос, или нет. Удачно обработанный ответ имеет статус-код - 2XX, не удачно - или 4XXX, или 5XX.

###### Пример удачно обработанного запроса:

```javascript
 {"status": "success"}
```

###### Пример не удачно обработанного запроса:

```javascript
 {"status": "error", "error": <имя ошибки>}
```

Кодов ошибок нету, есть только словестно описанная причина.

# Публичные Данные
## Получение списка активных валют

```javascript
 GET "/api/v1/currency"
```
###### Пример ответа :

```javascript
{
  "status": "success",
  "currencies": ["BTC","EUR",...]
}

```
Система возвращает список валют, которые на данный момент активны и имя самой валюты, как она подписана в системе

## Получение списка активных пар
```javascript
GET "/api/v1/pair"
```

###### Пример ответа :

```javascript
{
  "status": "success",
  "pairs": [
    [
      {
        "currency_to_spend": "UAH",
        "currency_to_get": "BTC",
        "name": "BTC_UAH",
        "base_currency": "BTC"
      }
    ],
```

API ендпоинт возвращает список активных пар, по которым можно совершать обмены.

**Расшифрока названия пары:**

Обычно в обмене принимают участие две валюты, одна - которую человек тратит, другая - которую получает.
В рамках текущего примера, пара "BTC_UAH" расшифроваеться как покупка BTC за UAH.
Для покупки, UAH за BTC - нужно использовать другую пару - "UAH_BTC". По-факту, у нас - одна пара, это одно направление обмена

## Получение цен


```javascript
 GET "api/v1/exchange_rate"
```

###### Пример ответа :

```javascript
{  
  "rates": [  
    {  
      "pair": "UAH_EUR",  
      "base_currency_price": 0.03800836,  
      "price": 26.31  
    }  
  ]  
}                              
																						
```

По текущему API ендпоинту, можно получить все цены по всем парам на обмен(ticker)


## Подсчёт стоимости обмена

```javascript
 GET "api/v1/exchange/calculate"
```

###### Параметры:

```javascript
currency_to_get - обязательный. Валюта, которую пользователь получает
currency_to_spend - обязательный. Валюта, которую пользователь тратит
currency_to_get_amount, currency_to_spend_amount - нужно указать один из параметров для подсчёта, либо "размер, валюты которую нужно получить", либо "размер валюты которую пользователь хочет потратить"
exchange_price - необязательный параметр. Можно указать цену для обмена, если не указываеться цена, берёться цена по рынку.
```

###### Пример ответа:

```javascript
{
  "currency_to_get_amount": 1,
  "currency_to_get": "BTC",
  "currency_to_spend_amount": 202170.7475,
  "currency_to_spend": "UAH",
  "status": "success",
  "exchange_price": 202170.7475
}
```
При каждом просчёте в ответе всегда возращаеться подсчитанный обмен(цена обмена, сколько будет потрачено и какой валюты и сколько будет получено)
